{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/atlas/atlas-hitl-ui/src/app/cases/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\n\ntype RiskLabel = \"ROUTINE\" | \"ESCALATE\" | \"BLOCK\";\ntype CaseStatus =\n  | \"PENDING_REVIEW\"\n  | \"APPROVED\"\n  | \"REJECTED\"\n  | \"NEEDS_INFO\"\n  | \"CLOSED\";\n\ntype CaseRecord = {\n  id: string;\n  user_name: string;\n  user_message: string;\n  tool_name: string;\n  tool_args_redacted: Record<string, unknown>;\n  risk_label: RiskLabel;\n  risk_score: number;\n  risk_rationale: string;\n  policy_refs: string[];\n  status: CaseStatus;\n  created_at: string;\n  audit_trail: Array<{\n    ts: string;\n    actor: string;\n    action: string;\n    detail?: string;\n  }>;\n};\n\nfunction cx(...parts: Array<string | false | null | undefined>) {\n  return parts.filter(Boolean).join(\" \");\n}\n\nfunction badgeClass(label: string) {\n  if (label === \"BLOCK\") return \"bg-red-600/90 text-white border-red-500/60\";\n  if (label === \"ESCALATE\") return \"bg-orange-500/90 text-white border-orange-400/60\";\n  if (label === \"APPROVED\") return \"bg-green-600/90 text-white border-green-500/60\";\n  if (label === \"REJECTED\") return \"bg-red-700/90 text-white border-red-600/60\";\n  if (label === \"PENDING_REVIEW\") return \"bg-slate-700/70 text-slate-100 border-slate-600/60\";\n  if (label === \"NEEDS_INFO\") return \"bg-yellow-500/90 text-black border-yellow-400/60\";\n  return \"bg-slate-600/60 text-slate-100 border-slate-500/60\";\n}\n\nasync function fetchCases(): Promise<CaseRecord[]> {\n  const res = await fetch(\"/api/cases\", { cache: \"no-store\" });\n  if (!res.ok) throw new Error(\"Failed to load cases\");\n  return res.json();\n}\n\nasync function decideCase(id: string, decision: \"APPROVE\" | \"REJECT\" | \"REQUEST_INFO\", note: string) {\n  const res = await fetch(`/api/cases/${encodeURIComponent(id)}`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ decision, note }),\n  });\n  if (!res.ok) throw new Error(\"Failed to submit decision\");\n  return res.json();\n}\n\nexport default function CasesPage() {\n  const [all, setAll] = useState<CaseRecord[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState<string | null>(null);\n\n  const [tab, setTab] = useState<\"PENDING\" | \"APPROVED\" | \"REJECTED\" | \"ALL\">(\"PENDING\");\n  const [q, setQ] = useState(\"\");\n  const [risk, setRisk] = useState<\"ALL\" | RiskLabel>(\"ALL\");\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [previewOpen, setPreviewOpen] = useState(false);\n\n  const [note, setNote] = useState(\"\");\n  const [busy, setBusy] = useState(false);\n\n  const tableWrapRef = useRef<HTMLDivElement | null>(null);\n\n  async function refresh() {\n    setLoading(true);\n    setErr(null);\n    try {\n      const data = await fetchCases();\n      setAll(data);\n    } catch (e: any) {\n      setErr(e?.message ?? \"Unknown error\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    refresh();\n  }, []);\n\n  const counts = useMemo(() => {\n    const pending = all.filter((c) => c.status === \"PENDING_REVIEW\").length;\n    const approved = all.filter((c) => c.status === \"APPROVED\").length;\n    const rejected = all.filter((c) => c.status === \"REJECTED\").length;\n    return { pending, approved, rejected, all: all.length };\n  }, [all]);\n\n  const filtered = useMemo(() => {\n    const t = tab;\n    const needle = q.trim().toLowerCase();\n\n    return all\n      .filter((c) => {\n        if (t === \"PENDING\" && c.status !== \"PENDING_REVIEW\") return false;\n        if (t === \"APPROVED\" && c.status !== \"APPROVED\") return false;\n        if (t === \"REJECTED\" && c.status !== \"REJECTED\") return false;\n        if (risk !== \"ALL\" && c.risk_label !== risk) return false;\n\n        if (!needle) return true;\n        const hay = [\n          c.id,\n          c.user_name,\n          c.tool_name,\n          c.user_message,\n          c.status,\n          c.risk_label,\n        ]\n          .join(\" \")\n          .toLowerCase();\n        return hay.includes(needle);\n      })\n      .sort((a, b) => (a.created_at < b.created_at ? 1 : -1));\n  }, [all, tab, q, risk]);\n\n  const selectedIndex = useMemo(() => {\n    if (!selectedId) return -1;\n    return filtered.findIndex((c) => c.id === selectedId);\n  }, [filtered, selectedId]);\n\n  const selected = useMemo(() => {\n    if (!selectedId) return null;\n    return all.find((c) => c.id === selectedId) ?? null;\n  }, [all, selectedId]);\n\n  function selectByIndex(i: number) {\n    if (filtered.length === 0) return;\n    const clamped = Math.max(0, Math.min(filtered.length - 1, i));\n    const id = filtered[clamped].id;\n    setSelectedId(id);\n    setPreviewOpen(true);\n\n    // Keep focus near table for keyboard nav.\n    requestAnimationFrame(() => tableWrapRef.current?.focus());\n  }\n\n  async function runDecision(decision: \"APPROVE\" | \"REJECT\" | \"REQUEST_INFO\") {\n    if (!selected) return;\n    setBusy(true);\n    setErr(null);\n    try {\n      await decideCase(selected.id, decision, note);\n      setNote(\"\");\n      await refresh();\n    } catch (e: any) {\n      setErr(e?.message ?? \"Decision failed\");\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  // Keyboard shortcuts:\n  // J/K move, A approve, R reject, I request info, Esc closes preview.\n  useEffect(() => {\n    function onKeyDown(e: KeyboardEvent) {\n      const tag = (e.target as any)?.tagName?.toLowerCase?.();\n      const typing =\n        tag === \"input\" || tag === \"textarea\" || (e.target as any)?.isContentEditable;\n\n      if (typing) return;\n\n      if (e.key === \"j\" || e.key === \"J\") {\n        e.preventDefault();\n        if (selectedIndex === -1) selectByIndex(0);\n        else selectByIndex(selectedIndex + 1);\n      }\n      if (e.key === \"k\" || e.key === \"K\") {\n        e.preventDefault();\n        if (selectedIndex === -1) selectByIndex(0);\n        else selectByIndex(selectedIndex - 1);\n      }\n      if (e.key === \"Escape\") {\n        e.preventDefault();\n        setPreviewOpen(false);\n      }\n      if (e.key === \"a\" || e.key === \"A\") {\n        e.preventDefault();\n        runDecision(\"APPROVE\");\n      }\n      if (e.key === \"r\" || e.key === \"R\") {\n        e.preventDefault();\n        runDecision(\"REJECT\");\n      }\n      if (e.key === \"i\" || e.key === \"I\") {\n        e.preventDefault();\n        runDecision(\"REQUEST_INFO\");\n      }\n    }\n\n    window.addEventListener(\"keydown\", onKeyDown);\n    return () => window.removeEventListener(\"keydown\", onKeyDown);\n  }, [selectedIndex, selected, note, filtered]);\n\n  return (\n    <div className=\"min-h-screen\">\n      <div className=\"mx-auto w-full max-w-[1600px] px-6 py-6\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-semibold tracking-tight\">HITL Review Inbox</h1>\n            <p className=\"text-sm text-muted-foreground\">\n              Triage escalations. Approve or block actions. Everything lands in audit.\n            </p>\n            {err ? (\n              <p className=\"mt-2 text-sm text-red-500\">Error: {err}</p>\n            ) : null}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <a\n              href=\"/\"\n              className=\"rounded-md border border-border bg-background/60 px-3 py-2 text-sm hover:bg-background\"\n            >\n              Home\n            </a>\n            <button\n              onClick={refresh}\n              className=\"rounded-md border border-border bg-background/60 px-3 py-2 text-sm hover:bg-background\"\n            >\n              Refresh\n            </button>\n            <a\n              href=\"/settings\"\n              className=\"rounded-md border border-border bg-background/60 px-3 py-2 text-sm hover:bg-background\"\n            >\n              Settings\n            </a>\n          </div>\n        </div>\n\n        <div className=\"mt-6 rounded-xl border border-border bg-background/40 p-4 shadow-sm\">\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <div className=\"inline-flex rounded-lg border border-border bg-background/50 p-1\">\n              <button\n                onClick={() => setTab(\"PENDING\")}\n                className={cx(\n                  \"rounded-md px-3 py-1.5 text-sm\",\n                  tab === \"PENDING\" && \"bg-foreground/10\"\n                )}\n              >\n                Pending ({counts.pending})\n              </button>\n              <button\n                onClick={() => setTab(\"APPROVED\")}\n                className={cx(\n                  \"rounded-md px-3 py-1.5 text-sm\",\n                  tab === \"APPROVED\" && \"bg-foreground/10\"\n                )}\n              >\n                Approved ({counts.approved})\n              </button>\n              <button\n                onClick={() => setTab(\"REJECTED\")}\n                className={cx(\n                  \"rounded-md px-3 py-1.5 text-sm\",\n                  tab === \"REJECTED\" && \"bg-foreground/10\"\n                )}\n              >\n                Rejected ({counts.rejected})\n              </button>\n              <button\n                onClick={() => setTab(\"ALL\")}\n                className={cx(\n                  \"rounded-md px-3 py-1.5 text-sm\",\n                  tab === \"ALL\" && \"bg-foreground/10\"\n                )}\n              >\n                All ({counts.all})\n              </button>\n            </div>\n\n            <input\n              value={q}\n              onChange={(e) => setQ(e.target.value)}\n              placeholder=\"Search case id, user, tool...\"\n              className=\"h-10 w-[320px] rounded-md border border-border bg-background/60 px-3 text-sm outline-none focus:ring-2 focus:ring-foreground/20\"\n            />\n\n            <select\n              value={risk}\n              onChange={(e) => setRisk(e.target.value as any)}\n              className=\"h-10 rounded-md border border-border bg-background/60 px-3 text-sm outline-none focus:ring-2 focus:ring-foreground/20\"\n            >\n              <option value=\"ALL\">All risk</option>\n              <option value=\"ROUTINE\">Routine</option>\n              <option value=\"ESCALATE\">Escalate</option>\n              <option value=\"BLOCK\">Block</option>\n            </select>\n\n            <div className=\"ml-auto flex items-center gap-2\">\n              <button\n                onClick={() => setPreviewOpen((v) => !v)}\n                className=\"h-10 rounded-md border border-border bg-background/60 px-3 text-sm hover:bg-background\"\n              >\n                {previewOpen ? \"Hide preview\" : \"Show preview\"}\n              </button>\n            </div>\n          </div>\n\n          <div\n            className={cx(\n              \"mt-4 grid gap-4\",\n              // Centered on ultrawide, fills space, preview is a right rail on xl+.\n              \"grid-cols-1 xl:grid-cols-[minmax(620px,1fr)_minmax(380px,460px)]\"\n            )}\n          >\n            <div className=\"min-w-0\">\n              <div className=\"rounded-xl border border-border bg-background/50\">\n                <div className=\"flex items-center justify-between px-4 py-3\">\n                  <div>\n                    <div className=\"text-sm font-medium\">Queue</div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      Click a row to preview. Shortcuts: J/K move, A approve, R reject, I request info, Esc close.\n                    </div>\n                  </div>\n\n                  <div className=\"text-xs text-muted-foreground\">\n                    {loading ? \"Loading...\" : `${filtered.length} shown`}\n                  </div>\n                </div>\n\n                <div\n                  ref={tableWrapRef}\n                  tabIndex={-1}\n                  className=\"max-h-[calc(100vh-260px)] overflow-auto outline-none\"\n                >\n                  <table className=\"w-full border-separate border-spacing-0\">\n                    <thead className=\"sticky top-0 z-10 bg-background/90 backdrop-blur\">\n                      <tr className=\"text-left text-xs text-muted-foreground\">\n                        <th className=\"px-4 py-3\">Case ID</th>\n                        <th className=\"px-4 py-3\">User</th>\n                        <th className=\"px-4 py-3\">Tool</th>\n                        <th className=\"px-4 py-3\">Verdict</th>\n                        <th className=\"px-4 py-3\">Score</th>\n                        <th className=\"px-4 py-3\">Status</th>\n                      </tr>\n                    </thead>\n\n                    <tbody>\n                      {filtered.map((c, i) => {\n                        const active = c.id === selectedId && previewOpen;\n                        return (\n                          <tr\n                            key={c.id}\n                            onClick={() => {\n                              setSelectedId(c.id);\n                              setPreviewOpen(true);\n                            }}\n                            className={cx(\n                              \"cursor-pointer border-t border-border/60\",\n                              \"hover:bg-foreground/5\",\n                              active && \"bg-foreground/10 ring-1 ring-foreground/20\"\n                            )}\n                          >\n                            <td className=\"px-4 py-3 text-sm font-medium\">\n                              <span className=\"underline decoration-foreground/30 underline-offset-4\">\n                                {c.id}\n                              </span>\n                            </td>\n                            <td className=\"px-4 py-3 text-sm\">{c.user_name}</td>\n                            <td className=\"px-4 py-3 text-sm\">\n                              <span className=\"block max-w-[420px] truncate\">\n                                {c.tool_name}\n                              </span>\n                            </td>\n                            <td className=\"px-4 py-3 text-sm\">\n                              <span\n                                className={cx(\n                                  \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-semibold\",\n                                  badgeClass(c.risk_label)\n                                )}\n                              >\n                                {c.risk_label}\n                              </span>\n                            </td>\n                            <td className=\"px-4 py-3 text-sm tabular-nums\">{c.risk_score}</td>\n                            <td className=\"px-4 py-3 text-sm\">\n                              <span\n                                className={cx(\n                                  \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-semibold\",\n                                  badgeClass(c.status)\n                                )}\n                              >\n                                {c.status}\n                              </span>\n                            </td>\n                          </tr>\n                        );\n                      })}\n\n                      {!loading && filtered.length === 0 ? (\n                        <tr>\n                          <td className=\"px-4 py-10 text-sm text-muted-foreground\" colSpan={6}>\n                            No cases match your filters.\n                          </td>\n                        </tr>\n                      ) : null}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n\n            {/* Preview rail */}\n            <div className={cx(\"min-w-0\", !previewOpen && \"hidden xl:block\")}>\n              <div\n                className={cx(\n                  \"rounded-xl border border-border bg-background/50\",\n                  \"xl:sticky xl:top-6\",\n                  \"max-h-[calc(100vh-72px)] overflow-hidden\"\n                )}\n              >\n                <div className=\"flex items-center justify-between border-b border-border/60 px-4 py-3\">\n                  <div className=\"text-sm font-medium\">Preview</div>\n                  <div className=\"flex items-center gap-2\">\n                    {selectedId ? (\n                      <a\n                        className=\"text-xs underline decoration-foreground/30 underline-offset-4 hover:opacity-80\"\n                        href={`/cases/${encodeURIComponent(selectedId)}`}\n                      >\n                        Open full page\n                      </a>\n                    ) : null}\n                    <button\n                      onClick={() => setPreviewOpen(false)}\n                      className=\"rounded-md border border-border bg-background/60 px-2 py-1 text-xs hover:bg-background\"\n                      title=\"Close preview (Esc)\"\n                    >\n                      X\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"max-h-[calc(100vh-140px)] overflow-auto p-4\">\n                  {!selected ? (\n                    <div className=\"text-sm text-muted-foreground\">\n                      Select a case to preview it here.\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      <div className=\"space-y-2\">\n                        <div className=\"flex flex-wrap items-start justify-between gap-2\">\n                          <div>\n                            <div className=\"text-lg font-semibold\">{selected.id}</div>\n                            <div className=\"text-xs text-muted-foreground\">\n                              Created: {selected.created_at}\n                            </div>\n                          </div>\n\n                          <div className=\"flex flex-wrap items-center gap-2\">\n                            <span\n                              className={cx(\n                                \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-semibold\",\n                                badgeClass(selected.risk_label)\n                              )}\n                            >\n                              {selected.risk_label}\n                            </span>\n                            <span\n                              className={cx(\n                                \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-semibold\",\n                                badgeClass(selected.status)\n                              )}\n                            >\n                              {selected.status}\n                            </span>\n                          </div>\n                        </div>\n\n                        <div className=\"rounded-lg border border-border/60 bg-background/40 p-3\">\n                          <div className=\"grid gap-2 text-sm\">\n                            <div className=\"break-words\">\n                              <span className=\"text-muted-foreground\">User:</span>{\" \"}\n                              <span className=\"font-medium\">{selected.user_name}</span>\n                            </div>\n                            <div className=\"break-words\">\n                              <span className=\"text-muted-foreground\">Tool:</span>{\" \"}\n                              <span className=\"font-medium\">{selected.tool_name}</span>\n                            </div>\n                            <div className=\"break-words\">\n                              <span className=\"text-muted-foreground\">Message:</span>{\" \"}\n                              <span className=\"font-medium\">{selected.user_message}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"rounded-lg border border-border/60 bg-gradient-to-b from-foreground/5 to-transparent p-4\">\n                        <div className=\"flex items-center justify-between gap-2\">\n                          <div className=\"text-sm font-semibold\">Risk Assessment</div>\n                          <div className=\"rounded-full border border-border bg-background/60 px-2 py-1 text-xs font-semibold\">\n                            Score: <span className=\"tabular-nums\">{selected.risk_score}</span>\n                          </div>\n                        </div>\n\n                        <div className=\"mt-3 text-sm\">\n                          <div className=\"text-xs font-semibold text-muted-foreground\">Reason</div>\n                          <div className=\"mt-1 whitespace-pre-wrap break-words\">\n                            {selected.risk_rationale}\n                          </div>\n                        </div>\n\n                        <div className=\"mt-3 text-sm\">\n                          <div className=\"text-xs font-semibold text-muted-foreground\">Policy refs</div>\n                          <div className=\"mt-2 flex flex-wrap gap-2\">\n                            {selected.policy_refs?.map((p) => (\n                              <span\n                                key={p}\n                                className=\"inline-flex items-center rounded-full border border-border bg-background/60 px-2 py-1 text-xs font-semibold\"\n                              >\n                                {p}\n                              </span>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n\n                      <div>\n                        <div className=\"text-sm font-semibold\">Decision note</div>\n                        <textarea\n                          value={note}\n                          onChange={(e) => setNote(e.target.value)}\n                          placeholder=\"Add a short note to the audit trail (optional).\"\n                          className=\"mt-2 w-full rounded-md border border-border bg-background/60 p-3 text-sm outline-none focus:ring-2 focus:ring-foreground/20\"\n                          rows={3}\n                        />\n\n                        <div className=\"mt-3 grid grid-cols-1 gap-2\">\n                          <button\n                            disabled={busy}\n                            onClick={() => runDecision(\"APPROVE\")}\n                            className=\"h-11 rounded-md bg-green-600 text-sm font-semibold text-white hover:bg-green-700 disabled:opacity-60\"\n                          >\n                            Approve (A)\n                          </button>\n                          <button\n                            disabled={busy}\n                            onClick={() => runDecision(\"REJECT\")}\n                            className=\"h-11 rounded-md bg-red-700 text-sm font-semibold text-white hover:bg-red-800 disabled:opacity-60\"\n                          >\n                            Reject (R)\n                          </button>\n                          <button\n                            disabled={busy}\n                            onClick={() => runDecision(\"REQUEST_INFO\")}\n                            className=\"h-11 rounded-md border border-border bg-background/60 text-sm font-semibold hover:bg-background disabled:opacity-60\"\n                          >\n                            Request info (I)\n                          </button>\n                        </div>\n\n                        <div className=\"mt-2 text-xs text-muted-foreground\">\n                          Tip: Esc closes preview. Toggle button also hides/shows preview.\n                        </div>\n                      </div>\n\n                      <div className=\"rounded-lg border border-border/60 bg-background/40 p-3\">\n                        <div className=\"text-sm font-semibold\">Tool args (redacted)</div>\n                        <pre className=\"mt-2 overflow-auto rounded-md bg-black/30 p-3 text-xs leading-relaxed\">\n{JSON.stringify(selected.tool_args_redacted ?? {}, null, 2)}\n                        </pre>\n                      </div>\n\n                      <div className=\"rounded-lg border border-border/60 bg-background/40 p-3\">\n                        <div className=\"text-sm font-semibold\">Audit trail</div>\n                        <div className=\"mt-2 space-y-2\">\n                          {(selected.audit_trail ?? []).map((a, idx) => (\n                            <div\n                              key={`${a.ts}-${idx}`}\n                              className=\"rounded-md border border-border/60 bg-background/60 p-2 text-xs\"\n                            >\n                              <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                                <div className=\"font-semibold\">{a.ts}</div>\n                                <div className=\"text-muted-foreground\">\n                                  {a.actor} - {a.action}\n                                </div>\n                              </div>\n                              {a.detail ? (\n                                <div className=\"mt-1 whitespace-pre-wrap break-words text-muted-foreground\">\n                                  {a.detail}\n                                </div>\n                              ) : null}\n                            </div>\n                          ))}\n                          {(selected.audit_trail ?? []).length === 0 ? (\n                            <div className=\"text-xs text-muted-foreground\">No audit entries yet.</div>\n                          ) : null}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* When preview is closed, show a small hint panel on xl+ */}\n              {!previewOpen ? (\n                <div className=\"mt-3 rounded-xl border border-border bg-background/40 p-4 xl:block\">\n                  <div className=\"text-sm font-semibold\">Preview is hidden</div>\n                  <div className=\"mt-1 text-xs text-muted-foreground\">\n                    Click a row to open it, or press J/K to select.\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAgCA,SAAS,GAAG,GAAG,KAA+C;IAC5D,OAAO,MAAM,MAAM,CAAC,SAAS,IAAI,CAAC;AACpC;AAEA,SAAS,WAAW,KAAa;IAC/B,IAAI,UAAU,SAAS,OAAO;IAC9B,IAAI,UAAU,YAAY,OAAO;IACjC,IAAI,UAAU,YAAY,OAAO;IACjC,IAAI,UAAU,YAAY,OAAO;IACjC,IAAI,UAAU,kBAAkB,OAAO;IACvC,IAAI,UAAU,cAAc,OAAO;IACnC,OAAO;AACT;AAEA,eAAe;IACb,MAAM,MAAM,MAAM,MAAM,cAAc;QAAE,OAAO;IAAW;IAC1D,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEA,eAAe,WAAW,EAAU,EAAE,QAA+C,EAAE,IAAY;IACjG,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,mBAAmB,KAAK,EAAE;QAC9D,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;YAAU;QAAK;IACxC;IACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAC7B,OAAO,IAAI,IAAI;AACjB;AAEe,SAAS;;IACtB,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAe,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAgB;IAE9C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAA8C;IAC5E,MAAM,CAAC,GAAG,KAAK,GAAG,IAAA,yKAAQ,EAAC;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAoB;IAEpD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAgB;IAC5D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IAEjC,MAAM,eAAe,IAAA,uKAAM,EAAwB;IAEnD,eAAe;QACb,WAAW;QACX,OAAO;QACP,IAAI;YACF,MAAM,OAAO,MAAM;YACnB,OAAO;QACT,EAAE,OAAO,GAAQ;YACf,OAAO,GAAG,WAAW;QACvB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,0KAAS;+BAAC;YACR;QACF;8BAAG,EAAE;IAEL,MAAM,SAAS,IAAA,wKAAO;qCAAC;YACrB,MAAM,UAAU,IAAI,MAAM;6CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;4CAAkB,MAAM;YACvE,MAAM,WAAW,IAAI,MAAM;6CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;4CAAY,MAAM;YAClE,MAAM,WAAW,IAAI,MAAM;6CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;4CAAY,MAAM;YAClE,OAAO;gBAAE;gBAAS;gBAAU;gBAAU,KAAK,IAAI,MAAM;YAAC;QACxD;oCAAG;QAAC;KAAI;IAER,MAAM,WAAW,IAAA,wKAAO;uCAAC;YACvB,MAAM,IAAI;YACV,MAAM,SAAS,EAAE,IAAI,GAAG,WAAW;YAEnC,OAAO,IACJ,MAAM;+CAAC,CAAC;oBACP,IAAI,MAAM,aAAa,EAAE,MAAM,KAAK,kBAAkB,OAAO;oBAC7D,IAAI,MAAM,cAAc,EAAE,MAAM,KAAK,YAAY,OAAO;oBACxD,IAAI,MAAM,cAAc,EAAE,MAAM,KAAK,YAAY,OAAO;oBACxD,IAAI,SAAS,SAAS,EAAE,UAAU,KAAK,MAAM,OAAO;oBAEpD,IAAI,CAAC,QAAQ,OAAO;oBACpB,MAAM,MAAM;wBACV,EAAE,EAAE;wBACJ,EAAE,SAAS;wBACX,EAAE,SAAS;wBACX,EAAE,YAAY;wBACd,EAAE,MAAM;wBACR,EAAE,UAAU;qBACb,CACE,IAAI,CAAC,KACL,WAAW;oBACd,OAAO,IAAI,QAAQ,CAAC;gBACtB;8CACC,IAAI;+CAAC,CAAC,GAAG,IAAO,EAAE,UAAU,GAAG,EAAE,UAAU,GAAG,IAAI,CAAC;;QACxD;sCAAG;QAAC;QAAK;QAAK;QAAG;KAAK;IAEtB,MAAM,gBAAgB,IAAA,wKAAO;4CAAC;YAC5B,IAAI,CAAC,YAAY,OAAO,CAAC;YACzB,OAAO,SAAS,SAAS;oDAAC,CAAC,IAAM,EAAE,EAAE,KAAK;;QAC5C;2CAAG;QAAC;QAAU;KAAW;IAEzB,MAAM,WAAW,IAAA,wKAAO;uCAAC;YACvB,IAAI,CAAC,YAAY,OAAO;YACxB,OAAO,IAAI,IAAI;+CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;iDAAe;QACjD;sCAAG;QAAC;QAAK;KAAW;IAEpB,SAAS,cAAc,CAAS;QAC9B,IAAI,SAAS,MAAM,KAAK,GAAG;QAC3B,MAAM,UAAU,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,SAAS,MAAM,GAAG,GAAG;QAC1D,MAAM,KAAK,QAAQ,CAAC,QAAQ,CAAC,EAAE;QAC/B,cAAc;QACd,eAAe;QAEf,0CAA0C;QAC1C,sBAAsB,IAAM,aAAa,OAAO,EAAE;IACpD;IAEA,eAAe,YAAY,QAA+C;QACxE,IAAI,CAAC,UAAU;QACf,QAAQ;QACR,OAAO;QACP,IAAI;YACF,MAAM,WAAW,SAAS,EAAE,EAAE,UAAU;YACxC,QAAQ;YACR,MAAM;QACR,EAAE,OAAO,GAAQ;YACf,OAAO,GAAG,WAAW;QACvB,SAAU;YACR,QAAQ;QACV;IACF;IAEA,sBAAsB;IACtB,qEAAqE;IACrE,IAAA,0KAAS;+BAAC;YACR,SAAS,UAAU,CAAgB;gBACjC,MAAM,MAAO,EAAE,MAAM,EAAU,SAAS;gBACxC,MAAM,SACJ,QAAQ,WAAW,QAAQ,cAAe,EAAE,MAAM,EAAU;gBAE9D,IAAI,QAAQ;gBAEZ,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,GAAG,KAAK,KAAK;oBAClC,EAAE,cAAc;oBAChB,IAAI,kBAAkB,CAAC,GAAG,cAAc;yBACnC,cAAc,gBAAgB;gBACrC;gBACA,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,GAAG,KAAK,KAAK;oBAClC,EAAE,cAAc;oBAChB,IAAI,kBAAkB,CAAC,GAAG,cAAc;yBACnC,cAAc,gBAAgB;gBACrC;gBACA,IAAI,EAAE,GAAG,KAAK,UAAU;oBACtB,EAAE,cAAc;oBAChB,eAAe;gBACjB;gBACA,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,GAAG,KAAK,KAAK;oBAClC,EAAE,cAAc;oBAChB,YAAY;gBACd;gBACA,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,GAAG,KAAK,KAAK;oBAClC,EAAE,cAAc;oBAChB,YAAY;gBACd;gBACA,IAAI,EAAE,GAAG,KAAK,OAAO,EAAE,GAAG,KAAK,KAAK;oBAClC,EAAE,cAAc;oBAChB,YAAY;gBACd;YACF;YAEA,OAAO,gBAAgB,CAAC,WAAW;YACnC;uCAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;8BAAG;QAAC;QAAe;QAAU;QAAM;KAAS;IAE5C,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAwC;;;;;;8CACtD,6LAAC;oCAAE,WAAU;8CAAgC;;;;;;gCAG5C,oBACC,6LAAC;oCAAE,WAAU;;wCAA4B;wCAAQ;;;;;;2CAC/C;;;;;;;sCAGN,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;8BAML,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,SAAS,IAAM,OAAO;4CACtB,WAAW,GACT,kCACA,QAAQ,aAAa;;gDAExB;gDACW,OAAO,OAAO;gDAAC;;;;;;;sDAE3B,6LAAC;4CACC,SAAS,IAAM,OAAO;4CACtB,WAAW,GACT,kCACA,QAAQ,cAAc;;gDAEzB;gDACY,OAAO,QAAQ;gDAAC;;;;;;;sDAE7B,6LAAC;4CACC,SAAS,IAAM,OAAO;4CACtB,WAAW,GACT,kCACA,QAAQ,cAAc;;gDAEzB;gDACY,OAAO,QAAQ;gDAAC;;;;;;;sDAE7B,6LAAC;4CACC,SAAS,IAAM,OAAO;4CACtB,WAAW,GACT,kCACA,QAAQ,SAAS;;gDAEpB;gDACO,OAAO,GAAG;gDAAC;;;;;;;;;;;;;8CAIrB,6LAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,KAAK,EAAE,MAAM,CAAC,KAAK;oCACpC,aAAY;oCACZ,WAAU;;;;;;8CAGZ,6LAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,WAAU;;sDAEV,6LAAC;4CAAO,OAAM;sDAAM;;;;;;sDACpB,6LAAC;4CAAO,OAAM;sDAAU;;;;;;sDACxB,6LAAC;4CAAO,OAAM;sDAAW;;;;;;sDACzB,6LAAC;4CAAO,OAAM;sDAAQ;;;;;;;;;;;;8CAGxB,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCACC,SAAS,IAAM,eAAe,CAAC,IAAM,CAAC;wCACtC,WAAU;kDAET,cAAc,iBAAiB;;;;;;;;;;;;;;;;;sCAKtC,6LAAC;4BACC,WAAW,GACT,mBACA,sEAAsE;4BACtE;;8CAGF,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;;0EACC,6LAAC;gEAAI,WAAU;0EAAsB;;;;;;0EACrC,6LAAC;gEAAI,WAAU;0EAAgC;;;;;;;;;;;;kEAKjD,6LAAC;wDAAI,WAAU;kEACZ,UAAU,eAAe,GAAG,SAAS,MAAM,CAAC,MAAM,CAAC;;;;;;;;;;;;0DAIxD,6LAAC;gDACC,KAAK;gDACL,UAAU,CAAC;gDACX,WAAU;0DAEV,cAAA,6LAAC;oDAAM,WAAU;;sEACf,6LAAC;4DAAM,WAAU;sEACf,cAAA,6LAAC;gEAAG,WAAU;;kFACZ,6LAAC;wEAAG,WAAU;kFAAY;;;;;;kFAC1B,6LAAC;wEAAG,WAAU;kFAAY;;;;;;kFAC1B,6LAAC;wEAAG,WAAU;kFAAY;;;;;;kFAC1B,6LAAC;wEAAG,WAAU;kFAAY;;;;;;kFAC1B,6LAAC;wEAAG,WAAU;kFAAY;;;;;;kFAC1B,6LAAC;wEAAG,WAAU;kFAAY;;;;;;;;;;;;;;;;;sEAI9B,6LAAC;;gEACE,SAAS,GAAG,CAAC,CAAC,GAAG;oEAChB,MAAM,SAAS,EAAE,EAAE,KAAK,cAAc;oEACtC,qBACE,6LAAC;wEAEC,SAAS;4EACP,cAAc,EAAE,EAAE;4EAClB,eAAe;wEACjB;wEACA,WAAW,GACT,4CACA,yBACA,UAAU;;0FAGZ,6LAAC;gFAAG,WAAU;0FACZ,cAAA,6LAAC;oFAAK,WAAU;8FACb,EAAE,EAAE;;;;;;;;;;;0FAGT,6LAAC;gFAAG,WAAU;0FAAqB,EAAE,SAAS;;;;;;0FAC9C,6LAAC;gFAAG,WAAU;0FACZ,cAAA,6LAAC;oFAAK,WAAU;8FACb,EAAE,SAAS;;;;;;;;;;;0FAGhB,6LAAC;gFAAG,WAAU;0FACZ,cAAA,6LAAC;oFACC,WAAW,GACT,kFACA,WAAW,EAAE,UAAU;8FAGxB,EAAE,UAAU;;;;;;;;;;;0FAGjB,6LAAC;gFAAG,WAAU;0FAAkC,EAAE,UAAU;;;;;;0FAC5D,6LAAC;gFAAG,WAAU;0FACZ,cAAA,6LAAC;oFACC,WAAW,GACT,kFACA,WAAW,EAAE,MAAM;8FAGpB,EAAE,MAAM;;;;;;;;;;;;uEAxCR,EAAE,EAAE;;;;;gEA6Cf;gEAEC,CAAC,WAAW,SAAS,MAAM,KAAK,kBAC/B,6LAAC;8EACC,cAAA,6LAAC;wEAAG,WAAU;wEAA2C,SAAS;kFAAG;;;;;;;;;;2EAIrE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8CAQd,6LAAC;oCAAI,WAAW,GAAG,WAAW,CAAC,eAAe;;sDAC5C,6LAAC;4CACC,WAAW,GACT,oDACA,sBACA;;8DAGF,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAI,WAAU;sEAAsB;;;;;;sEACrC,6LAAC;4DAAI,WAAU;;gEACZ,2BACC,6LAAC;oEACC,WAAU;oEACV,MAAM,CAAC,OAAO,EAAE,mBAAmB,aAAa;8EACjD;;;;;2EAGC;8EACJ,6LAAC;oEACC,SAAS,IAAM,eAAe;oEAC9B,WAAU;oEACV,OAAM;8EACP;;;;;;;;;;;;;;;;;;8DAML,6LAAC;oDAAI,WAAU;8DACZ,CAAC,yBACA,6LAAC;wDAAI,WAAU;kEAAgC;;;;;6EAI/C,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAI,WAAU;;kFACb,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;;kGACC,6LAAC;wFAAI,WAAU;kGAAyB,SAAS,EAAE;;;;;;kGACnD,6LAAC;wFAAI,WAAU;;4FAAgC;4FACnC,SAAS,UAAU;;;;;;;;;;;;;0FAIjC,6LAAC;gFAAI,WAAU;;kGACb,6LAAC;wFACC,WAAW,GACT,kFACA,WAAW,SAAS,UAAU;kGAG/B,SAAS,UAAU;;;;;;kGAEtB,6LAAC;wFACC,WAAW,GACT,kFACA,WAAW,SAAS,MAAM;kGAG3B,SAAS,MAAM;;;;;;;;;;;;;;;;;;kFAKtB,6LAAC;wEAAI,WAAU;kFACb,cAAA,6LAAC;4EAAI,WAAU;;8FACb,6LAAC;oFAAI,WAAU;;sGACb,6LAAC;4FAAK,WAAU;sGAAwB;;;;;;wFAAa;sGACrD,6LAAC;4FAAK,WAAU;sGAAe,SAAS,SAAS;;;;;;;;;;;;8FAEnD,6LAAC;oFAAI,WAAU;;sGACb,6LAAC;4FAAK,WAAU;sGAAwB;;;;;;wFAAa;sGACrD,6LAAC;4FAAK,WAAU;sGAAe,SAAS,SAAS;;;;;;;;;;;;8FAEnD,6LAAC;oFAAI,WAAU;;sGACb,6LAAC;4FAAK,WAAU;sGAAwB;;;;;;wFAAgB;sGACxD,6LAAC;4FAAK,WAAU;sGAAe,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0EAM5D,6LAAC;gEAAI,WAAU;;kFACb,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;gFAAI,WAAU;0FAAwB;;;;;;0FACvC,6LAAC;gFAAI,WAAU;;oFAAqF;kGAC3F,6LAAC;wFAAK,WAAU;kGAAgB,SAAS,UAAU;;;;;;;;;;;;;;;;;;kFAI9D,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;gFAAI,WAAU;0FAA8C;;;;;;0FAC7D,6LAAC;gFAAI,WAAU;0FACZ,SAAS,cAAc;;;;;;;;;;;;kFAI5B,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;gFAAI,WAAU;0FAA8C;;;;;;0FAC7D,6LAAC;gFAAI,WAAU;0FACZ,SAAS,WAAW,EAAE,IAAI,CAAC,kBAC1B,6LAAC;wFAEC,WAAU;kGAET;uFAHI;;;;;;;;;;;;;;;;;;;;;;0EAUf,6LAAC;;kFACC,6LAAC;wEAAI,WAAU;kFAAwB;;;;;;kFACvC,6LAAC;wEACC,OAAO;wEACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wEACvC,aAAY;wEACZ,WAAU;wEACV,MAAM;;;;;;kFAGR,6LAAC;wEAAI,WAAU;;0FACb,6LAAC;gFACC,UAAU;gFACV,SAAS,IAAM,YAAY;gFAC3B,WAAU;0FACX;;;;;;0FAGD,6LAAC;gFACC,UAAU;gFACV,SAAS,IAAM,YAAY;gFAC3B,WAAU;0FACX;;;;;;0FAGD,6LAAC;gFACC,UAAU;gFACV,SAAS,IAAM,YAAY;gFAC3B,WAAU;0FACX;;;;;;;;;;;;kFAKH,6LAAC;wEAAI,WAAU;kFAAqC;;;;;;;;;;;;0EAKtD,6LAAC;gEAAI,WAAU;;kFACb,6LAAC;wEAAI,WAAU;kFAAwB;;;;;;kFACvC,6LAAC;wEAAI,WAAU;kFACtC,KAAK,SAAS,CAAC,SAAS,kBAAkB,IAAI,CAAC,GAAG,MAAM;;;;;;;;;;;;0EAInC,6LAAC;gEAAI,WAAU;;kFACb,6LAAC;wEAAI,WAAU;kFAAwB;;;;;;kFACvC,6LAAC;wEAAI,WAAU;;4EACZ,CAAC,SAAS,WAAW,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,GAAG,oBACpC,6LAAC;oFAEC,WAAU;;sGAEV,6LAAC;4FAAI,WAAU;;8GACb,6LAAC;oGAAI,WAAU;8GAAiB,EAAE,EAAE;;;;;;8GACpC,6LAAC;oGAAI,WAAU;;wGACZ,EAAE,KAAK;wGAAC;wGAAI,EAAE,MAAM;;;;;;;;;;;;;wFAGxB,EAAE,MAAM,iBACP,6LAAC;4FAAI,WAAU;sGACZ,EAAE,MAAM;;;;;mGAET;;mFAbC,GAAG,EAAE,EAAE,CAAC,CAAC,EAAE,KAAK;;;;;4EAgBxB,CAAC,SAAS,WAAW,IAAI,EAAE,EAAE,MAAM,KAAK,kBACvC,6LAAC;gFAAI,WAAU;0FAAgC;;;;;uFAC7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wCASf,CAAC,4BACA,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;8DAAwB;;;;;;8DACvC,6LAAC;oDAAI,WAAU;8DAAqC;;;;;;;;;;;mDAIpD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlB;GAjjBwB;KAAA"}}]
}