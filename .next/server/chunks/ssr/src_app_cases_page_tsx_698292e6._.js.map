{"version":3,"sources":["../../../../src/app/cases/page.tsx","../../../../src/lib/userSettings.ts","../../../../src/app/_components/ThemeInit.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport ThemeInit from \"@/app/_components/ThemeInit\";\n\ntype RiskLabel = \"ROUTINE\" | \"ESCALATE\" | \"BLOCK\";\ntype CaseStatus = \"PENDING_REVIEW\" | \"APPROVED\" | \"REJECTED\" | \"NEEDS_INFO\" | \"CLOSED\";\ntype QuickFilter = \"ALL\" | \"HIGH_RISK\" | \"WAITING_24H\";\n\ntype CaseRecord = {\n  id: string;\n  user_name: string;\n  user_message: string;\n  tool_name: string;\n  tool_args_redacted: Record<string, unknown>;\n  risk_label: RiskLabel;\n  risk_score: number;\n  risk_rationale: string;\n  policy_refs: string[];\n  status: CaseStatus;\n  created_at: string;\n  audit_trail: Array<{\n    ts: string;\n    actor: string;\n    action: string;\n    detail?: string;\n  }>;\n};\n\nfunction cx(...parts: Array<string | false | null | undefined>) {\n  return parts.filter(Boolean).join(\" \");\n}\n\nfunction badgeClass(label: string) {\n  if (label === \"BLOCK\") return \"bg-red-600/90 text-white border-red-500/60\";\n  if (label === \"ESCALATE\") return \"bg-orange-500/90 text-white border-orange-400/60\";\n  if (label === \"APPROVED\") return \"bg-green-600/90 text-white border-green-500/60\";\n  if (label === \"REJECTED\") return \"bg-red-700/90 text-white border-red-600/60\";\n  if (label === \"PENDING_REVIEW\") return \"bg-slate-700/70 text-slate-100 border-slate-600/60\";\n  if (label === \"NEEDS_INFO\") return \"bg-yellow-500/90 text-black border-yellow-400/60\";\n  return \"bg-slate-600/60 text-slate-100 border-slate-500/60\";\n}\n\nfunction formatKey(key: string) {\n  return key.replace(/_/g, \" \").replace(/\\b\\w/g, (c) => c.toUpperCase());\n}\n\nfunction isPlainObject(value: unknown): value is Record<string, unknown> {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\n\nfunction renderInlineValue(value: unknown) {\n  if (value === null || value === undefined) {\n    return <div className=\"text-xs text-muted-foreground\">—</div>;\n  }\n  if (Array.isArray(value)) {\n    return (\n      <ul className=\"list-disc pl-4 text-sm\">\n        {value.map((item, i) => (\n          <li key={`${String(item)}-${i}`} className=\"break-words\">\n            {typeof item === \"string\" ? item : JSON.stringify(item)}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n  if (isPlainObject(value)) {\n    return (\n      <pre className=\"mt-1 overflow-auto rounded-md bg-black/30 p-2 text-xs\">\n        {JSON.stringify(value, null, 2)}\n      </pre>\n    );\n  }\n  return <div className=\"text-sm break-words\">{String(value)}</div>;\n}\n\nfunction renderObjectGrid(obj: Record<string, unknown>) {\n  const entries = Object.entries(obj);\n  if (!entries.length) {\n    return <div className=\"text-xs text-muted-foreground\">—</div>;\n  }\n\n  return (\n    <div className=\"mt-2 space-y-2\">\n      {entries.map(([key, value]) => (\n        <div key={key} className=\"grid grid-cols-[140px_minmax(0,1fr)] gap-3\">\n          <div className=\"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground\">\n            {formatKey(key)}\n          </div>\n          <div>{renderInlineValue(value)}</div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nasync function fetchCases(): Promise<CaseRecord[]> {\n  const res = await fetch(\"/api/cases\", { cache: \"no-store\" });\n  if (!res.ok) throw new Error(\"Failed to load cases\");\n  return res.json();\n}\n\nasync function decideCase(\n  id: string,\n  decision: \"APPROVE\" | \"REJECT\" | \"REQUEST_INFO\",\n  note: string\n) {\n  const res = await fetch(`/api/cases/${encodeURIComponent(id)}`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ decision, note }),\n  });\n  if (!res.ok) throw new Error(\"Failed to submit decision\");\n  return res.json();\n}\n\nexport default function CasesPage() {\n  const [all, setAll] = useState<CaseRecord[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [err, setErr] = useState<string | null>(null);\n\n  const [tab, setTab] = useState<\"PENDING\" | \"APPROVED\" | \"REJECTED\" | \"ALL\">(\"PENDING\");\n  const [q, setQ] = useState(\"\");\n  const [risk, setRisk] = useState<\"ALL\" | RiskLabel>(\"ALL\");\n  const [quick, setQuick] = useState<QuickFilter>(\"ALL\");\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [note, setNote] = useState(\"\");\n  const [busy, setBusy] = useState(false);\n\n  const now = Date.now();\n  const hoursSince = (iso: string) =>\n    Math.floor((now - new Date(iso).getTime()) / (1000 * 60 * 60));\n\n  async function refresh() {\n    setLoading(true);\n    setRefreshing(true);\n    setErr(null);\n    try {\n      const data = await fetchCases();\n      setAll(data);\n\n      if (selectedId && !data.some((c) => c.id === selectedId)) {\n        setSelectedId(null);\n      }\n    } catch (e: any) {\n      setErr(e?.message ?? \"Unknown error\");\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }\n\n  useEffect(() => {\n    void refresh();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const counts = useMemo(() => {\n    const pending = all.filter((c) => c.status === \"PENDING_REVIEW\").length;\n    const approved = all.filter((c) => c.status === \"APPROVED\").length;\n    const rejected = all.filter((c) => c.status === \"REJECTED\").length;\n    return { pending, approved, rejected, all: all.length };\n  }, [all]);\n\n  const metrics = useMemo(() => {\n    const escalated = all.filter((c) => c.risk_label === \"ESCALATE\" || c.risk_label === \"BLOCK\").length;\n    const waiting24h = all.filter(\n      (c) => c.status === \"PENDING_REVIEW\" && hoursSince(c.created_at) >= 24\n    ).length;\n    const oldestPending = all\n      .filter((c) => c.status === \"PENDING_REVIEW\")\n      .reduce((max, c) => Math.max(max, hoursSince(c.created_at)), 0);\n\n    return { escalated, waiting24h, oldestPending };\n  }, [all, now]);\n\n  const filtered = useMemo(() => {\n    const needle = q.trim().toLowerCase();\n\n    return all\n      .filter((c) => {\n        if (tab === \"PENDING\" && c.status !== \"PENDING_REVIEW\") return false;\n        if (tab === \"APPROVED\" && c.status !== \"APPROVED\") return false;\n        if (tab === \"REJECTED\" && c.status !== \"REJECTED\") return false;\n        if (risk !== \"ALL\" && c.risk_label !== risk) return false;\n\n        if (quick === \"HIGH_RISK\" && !(c.risk_label === \"ESCALATE\" || c.risk_label === \"BLOCK\")) {\n          return false;\n        }\n        if (quick === \"WAITING_24H\" && hoursSince(c.created_at) < 24) return false;\n\n        if (!needle) return true;\n\n        const hay = [\n          c.id,\n          c.user_name,\n          c.user_message,\n          c.tool_name,\n          c.risk_label,\n          c.status,\n          c.risk_rationale,\n          (c.policy_refs ?? []).join(\" \"),\n        ]\n          .join(\" \")\n          .toLowerCase();\n\n        return hay.includes(needle);\n      })\n      .sort((a, b) => (a.created_at < b.created_at ? 1 : -1));\n  }, [all, tab, risk, q, quick, now]);\n\n  const selected = useMemo(() => {\n    if (!selectedId) return null;\n    return all.find((c) => c.id === selectedId) ?? null;\n  }, [all, selectedId]);\n\n  async function onDecision(decision: \"APPROVE\" | \"REJECT\" | \"REQUEST_INFO\") {\n    if (!selected) return;\n    setBusy(true);\n    setErr(null);\n    try {\n      await decideCase(selected.id, decision, note);\n      setNote(\"\");\n      await refresh();\n    } catch (e: any) {\n      setErr(e?.message ?? \"Failed to submit decision\");\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background text-foreground\">\n      <ThemeInit />\n\n      <div className=\"mx-auto flex min-h-screen w-full max-w-none flex-col px-4 py-6 sm:px-6 lg:px-10\">\n        <div className=\"flex items-center justify-between gap-3\">\n          <div>\n            <div className=\"text-2xl font-semibold tracking-tight\">Cases</div>\n            <div className=\"text-sm text-muted-foreground\">Review queue and decisions.</div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => void refresh()}\n              className=\"h-9 rounded-md border border-muted/60 bg-background/40 px-3 text-sm shadow-sm backdrop-blur hover:bg-background/60\"\n            >\n              {refreshing ? \"Refreshing...\" : \"Refresh\"}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"mt-4 grid gap-3 md:grid-cols-3\">\n          <div className=\"rounded-xl border border-muted/50 bg-background/40 p-4\">\n            <div className=\"text-xs text-muted-foreground\">Pending</div>\n            <div className=\"text-2xl font-semibold\">{counts.pending}</div>\n          </div>\n          <div className=\"rounded-xl border border-muted/50 bg-background/40 p-4\">\n            <div className=\"text-xs text-muted-foreground\">Escalated</div>\n            <div className=\"text-2xl font-semibold\">{metrics.escalated}</div>\n          </div>\n          <div className=\"rounded-xl border border-muted/50 bg-background/40 p-4\">\n            <div className=\"text-xs text-muted-foreground\">SLA 24h breach</div>\n            <div className=\"text-2xl font-semibold\">{metrics.waiting24h}</div>\n            <div className=\"text-xs text-muted-foreground mt-1\">\n              Oldest pending: {metrics.oldestPending}h\n            </div>\n          </div>\n        </div>\n\n        {err ? (\n          <div className=\"mt-4 rounded-md border border-red-500/40 bg-red-500/10 p-3 text-sm text-red-200\">\n            {err}\n          </div>\n        ) : null}\n\n        <div className=\"mt-5 flex flex-wrap items-center gap-2\">\n          <div className=\"inline-flex rounded-md border border-muted/60 bg-background/40 p-1 backdrop-blur\">\n            <button\n              className={cx(\"h-8 rounded px-3 text-sm\", tab === \"PENDING\" && \"bg-foreground text-background\")}\n              onClick={() => setTab(\"PENDING\")}\n            >\n              Pending ({counts.pending})\n            </button>\n            <button\n              className={cx(\"h-8 rounded px-3 text-sm\", tab === \"APPROVED\" && \"bg-foreground text-background\")}\n              onClick={() => setTab(\"APPROVED\")}\n            >\n              Approved ({counts.approved})\n            </button>\n            <button\n              className={cx(\"h-8 rounded px-3 text-sm\", tab === \"REJECTED\" && \"bg-foreground text-background\")}\n              onClick={() => setTab(\"REJECTED\")}\n            >\n              Rejected ({counts.rejected})\n            </button>\n            <button\n              className={cx(\"h-8 rounded px-3 text-sm\", tab === \"ALL\" && \"bg-foreground text-background\")}\n              onClick={() => setTab(\"ALL\")}\n            >\n              All ({counts.all})\n            </button>\n          </div>\n\n          <div className=\"inline-flex items-center gap-2\">\n            <button\n              className={cx(\n                \"h-8 rounded-full border px-3 text-xs\",\n                quick === \"HIGH_RISK\" ? \"border-amber-400/60 bg-amber-400/15\" : \"border-muted/60 bg-background/40\"\n              )}\n              onClick={() => setQuick(quick === \"HIGH_RISK\" ? \"ALL\" : \"HIGH_RISK\")}\n            >\n              High risk only\n            </button>\n            <button\n              className={cx(\n                \"h-8 rounded-full border px-3 text-xs\",\n                quick === \"WAITING_24H\" ? \"border-rose-400/60 bg-rose-400/15\" : \"border-muted/60 bg-background/40\"\n              )}\n              onClick={() => setQuick(quick === \"WAITING_24H\" ? \"ALL\" : \"WAITING_24H\")}\n            >\n              Waiting &gt; 24h\n            </button>\n          </div>\n\n          <input\n            value={q}\n            onChange={(e) => setQ(e.target.value)}\n            placeholder=\"Search id, user, tool, text, policy refs...\"\n            className=\"h-9 w-full max-w-md rounded-md border border-muted/60 bg-background/40 px-3 text-sm shadow-sm outline-none focus:ring-2 focus:ring-foreground/30\"\n          />\n\n          <select\n            value={risk}\n            onChange={(e) => setRisk(e.target.value as any)}\n            className=\"h-9 rounded-md border border-muted/60 bg-background/40 px-3 text-sm shadow-sm outline-none\"\n          >\n            <option value=\"ALL\">All risk</option>\n            <option value=\"ROUTINE\">Routine</option>\n            <option value=\"ESCALATE\">Escalate</option>\n            <option value=\"BLOCK\">Block</option>\n          </select>\n        </div>\n\n        <div className=\"mt-6 grid flex-1 min-h-0 gap-4 lg:grid-cols-[minmax(0,1fr)_minmax(360px,520px)] items-start\">\n          <div className=\"rounded-xl border border-muted/60 bg-background/40 backdrop-blur flex min-h-0 flex-col min-w-0 h-[calc(100vh-320px)]\">\n            <div className=\"flex-1 min-h-0 overflow-y-auto overflow-x-hidden\">\n              <table className=\"w-full table-fixed text-sm\">\n                <thead className=\"border-b border-muted/60 text-muted-foreground\">\n                  <tr>\n                    <th className=\"px-3 py-3 text-left font-medium w-[120px]\">Status</th>\n                    <th className=\"px-3 py-3 text-left font-medium w-[120px]\">Risk</th>\n                    <th className=\"px-3 py-3 text-left font-medium hidden md:table-cell w-[180px]\">Created</th>\n                    <th className=\"px-3 py-3 text-left font-medium hidden lg:table-cell w-[140px]\">User</th>\n                    <th className=\"px-3 py-3 text-left font-medium w-[180px]\">Tool</th>\n                    <th className=\"px-3 py-3 text-left font-medium\">Message</th>\n                    <th className=\"px-3 py-3 text-right font-medium w-[150px]\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loading ? (\n                    <tr>\n                      <td className=\"px-3 py-6 text-muted-foreground\" colSpan={7}>\n                        Loading...\n                      </td>\n                    </tr>\n                  ) : filtered.length === 0 ? (\n                    <tr>\n                      <td className=\"px-3 py-6 text-muted-foreground\" colSpan={7}>\n                        No cases match your filters.\n                      </td>\n                    </tr>\n                  ) : (\n                    filtered.map((c) => {\n                      const active = c.id === selectedId;\n                      return (\n                        <tr\n                          key={c.id}\n                          onClick={() => setSelectedId(c.id)}\n                          className={cx(\n                            \"cursor-pointer border-t border-muted/40 hover:bg-foreground/5 group\",\n                            active && \"bg-foreground/10\"\n                          )}\n                        >\n                          <td className=\"px-3 py-3 align-top\">\n                            <span\n                              className={cx(\n                                \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs\",\n                                badgeClass(c.status)\n                              )}\n                            >\n                              {c.status}\n                            </span>\n                          </td>\n                          <td className=\"px-3 py-3 align-top\">\n                            <span\n                              className={cx(\n                                \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs\",\n                                badgeClass(c.risk_label)\n                              )}\n                            >\n                              {c.risk_label} ({Math.round(c.risk_score)})\n                            </span>\n                          </td>\n                          <td className=\"px-3 py-3 text-muted-foreground align-top hidden md:table-cell\">\n                            {new Date(c.created_at).toLocaleString()}\n                          </td>\n                          <td className=\"px-3 py-3 align-top hidden lg:table-cell\">{c.user_name}</td>\n                          <td className=\"px-3 py-3 align-top break-words\">{c.tool_name}</td>\n                          <td className=\"px-3 py-3 text-muted-foreground align-top whitespace-normal break-words\">\n                            {c.user_message}\n                          </td>\n                          <td className=\"px-3 py-3 text-right align-top\">\n                            <div className=\"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition\">\n                              <button\n                                className=\"h-7 rounded-md border border-muted/60 px-2 text-xs hover:bg-background/60\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setSelectedId(c.id);\n                                }}\n                              >\n                                Open\n                              </button>\n                              <button\n                                className=\"h-7 rounded-md border border-green-500/60 bg-green-500/15 px-2 text-xs hover:bg-green-500/25\"\n                                onClick={async (e) => {\n                                  e.stopPropagation();\n                                  setSelectedId(c.id);\n                                  setBusy(true);\n                                  setErr(null);\n                                  try {\n                                    await decideCase(c.id, \"APPROVE\", \"\");\n                                    await refresh();\n                                  } catch (err: any) {\n                                    setErr(err?.message ?? \"Failed to submit decision\");\n                                  } finally {\n                                    setBusy(false);\n                                  }\n                                }}\n                                disabled={busy}\n                              >\n                                Approve\n                              </button>\n                              <button\n                                className=\"h-7 rounded-md border border-red-500/60 bg-red-500/15 px-2 text-xs hover:bg-red-500/25\"\n                                onClick={async (e) => {\n                                  e.stopPropagation();\n                                  setSelectedId(c.id);\n                                  setBusy(true);\n                                  setErr(null);\n                                  try {\n                                    await decideCase(c.id, \"REJECT\", \"\");\n                                    await refresh();\n                                  } catch (err: any) {\n                                    setErr(err?.message ?? \"Failed to submit decision\");\n                                  } finally {\n                                    setBusy(false);\n                                  }\n                                }}\n                                disabled={busy}\n                              >\n                                Reject\n                              </button>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div className=\"rounded-xl border border-muted/60 bg-background/40 p-4 backdrop-blur h-[calc(100vh-320px)] min-w-0 flex flex-col\">\n            {selected ? (\n              <>\n                <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                  <div>\n                    <div className=\"text-sm font-semibold\">Case details</div>\n                    <div className=\"mt-1 text-xs text-muted-foreground\">\n                      ID: <span className=\"font-mono\">{selected.id}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center gap-2\">\n                    <span\n                      className={cx(\n                        \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs\",\n                        badgeClass(selected.status)\n                      )}\n                    >\n                      {selected.status}\n                    </span>\n                    <span\n                      className={cx(\n                        \"inline-flex items-center rounded-full border px-2 py-0.5 text-xs\",\n                        badgeClass(selected.risk_label)\n                      )}\n                    >\n                      {selected.risk_label} ({Math.round(selected.risk_score)})\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"mt-4 flex-1 min-h-0 overflow-y-auto space-y-4 pr-1\">\n                  <div className=\"rounded-lg border border-muted/60 bg-background/30 p-3\">\n                    <div className=\"text-xs font-semibold text-muted-foreground\">User message</div>\n                    <pre className=\"mt-2 whitespace-pre-wrap text-sm\">{selected.user_message}</pre>\n                  </div>\n\n                  <div className=\"rounded-lg border border-muted/60 bg-background/30 p-3\">\n                    <div className=\"text-xs font-semibold text-muted-foreground\">Risk rationale</div>\n                    <pre className=\"mt-2 whitespace-pre-wrap text-sm\">{selected.risk_rationale}</pre>\n                  </div>\n\n                  <div className=\"rounded-lg border border-muted/60 bg-background/30 p-3\">\n                    <div className=\"text-xs font-semibold text-muted-foreground\">Tool args (redacted)</div>\n                    {Object.keys(selected.tool_args_redacted ?? {}).length ? (\n                      <div className=\"mt-2 grid gap-3\">\n                        {Object.entries(selected.tool_args_redacted ?? {}).map(([key, value]) => (\n                          <div key={key} className=\"rounded-lg border border-muted/40 bg-background/40 p-3\">\n                            <div className=\"text-[11px] font-semibold uppercase tracking-wide text-muted-foreground\">\n                              {formatKey(key)}\n                            </div>\n                            {isPlainObject(value) ? renderObjectGrid(value) : <div className=\"mt-2\">{renderInlineValue(value)}</div>}\n                          </div>\n                        ))}\n                      </div>\n                    ) : (\n                      <div className=\"mt-2 text-sm text-muted-foreground\">None</div>\n                    )}\n                  </div>\n\n                  <div className=\"rounded-lg border border-muted/60 bg-background/30 p-3\">\n                    <div className=\"text-xs font-semibold text-muted-foreground\">Policy refs</div>\n                    {selected.policy_refs?.length ? (\n                      <ul className=\"mt-2 list-disc pl-5 text-sm\">\n                        {selected.policy_refs.map((p, i) => (\n                          <li key={p + \":\" + i} className=\"break-words\">\n                            {p}\n                          </li>\n                        ))}\n                      </ul>\n                    ) : (\n                      <div className=\"mt-2 text-sm text-muted-foreground\">None</div>\n                    )}\n                  </div>\n\n                  <div className=\"rounded-lg border border-muted/60 bg-background/30 p-3\">\n                    <div className=\"text-xs font-semibold text-muted-foreground\">Audit trail</div>\n                    {selected.audit_trail?.length ? (\n                      <div className=\"mt-2 space-y-2 text-sm\">\n                        {selected.audit_trail.map((a, i) => (\n                          <div key={a.ts + \":\" + i} className=\"rounded-md border border-muted/40 p-2\">\n                            <div className=\"text-xs text-muted-foreground\">\n                              {new Date(a.ts).toLocaleString()} - {a.actor} - {a.action}\n                            </div>\n                            {a.detail ? (\n                              <div className=\"mt-1 whitespace-pre-wrap text-sm\">{a.detail}</div>\n                            ) : null}\n                          </div>\n                        ))}\n                      </div>\n                    ) : (\n                      <div className=\"mt-2 text-sm text-muted-foreground\">No audit entries.</div>\n                    )}\n                  </div>\n\n                  <div className=\"rounded-lg border border-muted/60 bg-background/30 p-3\">\n                    <div className=\"text-xs font-semibold text-muted-foreground\">Decision note</div>\n                    <textarea\n                      value={note}\n                      onChange={(e) => setNote(e.target.value)}\n                      placeholder=\"Reasoning, next steps, or info request...\"\n                      className=\"mt-2 h-24 w-full resize-y rounded-md border border-muted/60 bg-background/40 p-2 text-sm outline-none focus:ring-2 focus:ring-foreground/30\"\n                    />\n\n                    <div className=\"mt-3 flex flex-wrap gap-2\">\n                      <button\n                        disabled={busy}\n                        onClick={() => onDecision(\"APPROVE\")}\n                        className={cx(\n                          \"h-9 rounded-md border px-3 text-sm shadow-sm\",\n                          \"border-green-500/60 bg-green-500/20 hover:bg-green-500/30\",\n                          busy && \"opacity-50\"\n                        )}\n                      >\n                        Approve\n                      </button>\n                      <button\n                        disabled={busy}\n                        onClick={() => onDecision(\"REJECT\")}\n                        className={cx(\n                          \"h-9 rounded-md border px-3 text-sm shadow-sm\",\n                          \"border-red-500/60 bg-red-500/20 hover:bg-red-500/30\",\n                          busy && \"opacity-50\"\n                        )}\n                      >\n                        Reject\n                      </button>\n                      <button\n                        disabled={busy}\n                        onClick={() => onDecision(\"REQUEST_INFO\")}\n                        className={cx(\n                          \"h-9 rounded-md border px-3 text-sm shadow-sm\",\n                          \"border-yellow-500/60 bg-yellow-500/20 hover:bg-yellow-500/30\",\n                          busy && \"opacity-50\"\n                        )}\n                      >\n                        Request info\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </>\n            ) : (\n              <div className=\"text-sm text-muted-foreground\">Select a case to see details.</div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","export type ThemeMode = \"system\" | \"light\" | \"dark\";\nexport type InboxTab = \"PENDING\" | \"APPROVED\" | \"REJECTED\" | \"ALL\";\nexport type RiskFilter = \"ALL\" | \"ROUTINE\" | \"ESCALATE\" | \"BLOCK\";\nexport type PreviewBehavior = \"open_on_click\" | \"auto_on_select\";\nexport type PreviewPosition = \"right_rail\" | \"modal_drawer\";\nexport type NoteRequirement = \"off\" | \"block_only\" | \"high_only\" | \"block_or_high\";\nexport type AutoRefresh = \"off\" | \"30s\" | \"60s\";\n\nexport type UserSettings = {\n  theme: ThemeMode;\n  keyboardShortcuts: boolean;\n\n  defaultInboxTab: InboxTab;\n  defaultRiskFilter: RiskFilter;\n\n  previewBehavior: PreviewBehavior;\n  previewPosition: PreviewPosition;\n\n  decisionRequiresNote: NoteRequirement;\n  highRiskThreshold: number; // used when decisionRequiresNote involves high risk\n\n  autoRefresh: AutoRefresh;\n};\n\nexport const SETTINGS_KEY = \"atlas_user_settings_v1\";\n\nexport const defaultSettings: UserSettings = {\n  theme: \"system\",\n  keyboardShortcuts: true,\n\n  defaultInboxTab: \"PENDING\",\n  defaultRiskFilter: \"ALL\",\n\n  previewBehavior: \"open_on_click\",\n  previewPosition: \"right_rail\",\n\n  decisionRequiresNote: \"off\",\n  highRiskThreshold: 80,\n\n  autoRefresh: \"off\",\n};\n\nexport function loadSettings(): UserSettings {\n  if (typeof window === \"undefined\") return defaultSettings;\n\n  const raw = window.localStorage.getItem(SETTINGS_KEY);\n  if (!raw) return defaultSettings;\n\n  try {\n    const parsed = JSON.parse(raw) as Partial<UserSettings>;\n    return {\n      ...defaultSettings,\n      ...parsed,\n      // safety: keep threshold sane\n      highRiskThreshold:\n        typeof parsed.highRiskThreshold === \"number\"\n          ? Math.min(100, Math.max(0, parsed.highRiskThreshold))\n          : defaultSettings.highRiskThreshold,\n    };\n  } catch {\n    return defaultSettings;\n  }\n}\n\nexport function saveSettings(s: UserSettings) {\n  if (typeof window === \"undefined\") return;\n  window.localStorage.setItem(SETTINGS_KEY, JSON.stringify(s));\n  window.dispatchEvent(new CustomEvent(\"atlas_settings_change\"));\n}\n\nexport function onSettingsChange(handler: () => void) {\n  if (typeof window === \"undefined\") return () => {};\n  const fn = () => handler();\n  window.addEventListener(\"atlas_settings_change\", fn);\n  window.addEventListener(\"storage\", fn);\n  return () => {\n    window.removeEventListener(\"atlas_settings_change\", fn);\n    window.removeEventListener(\"storage\", fn);\n  };\n}\n\nexport function applyTheme(mode: ThemeMode) {\n  if (typeof window === \"undefined\") return;\n\n  const root = document.documentElement;\n  const prefersDark =\n    window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n\n  const shouldDark = mode === \"dark\" || (mode === \"system\" && prefersDark);\n\n  if (shouldDark) root.classList.add(\"dark\");\n  else root.classList.remove(\"dark\");\n}\n","\"use client\";\n\nimport { useEffect } from \"react\";\nimport { applyTheme, loadSettings, onSettingsChange } from \"@/lib/userSettings\";\n\nexport default function ThemeInit() {\n  useEffect(() => {\n    const run = () => {\n      const s = loadSettings();\n      applyTheme(s.theme);\n    };\n\n    run();\n\n    const off = onSettingsChange(run);\n\n    // respond to system theme changes when in \"system\"\n    const mql =\n      typeof window !== \"undefined\"\n        ? window.matchMedia(\"(prefers-color-scheme: dark)\")\n        : null;\n\n    const onMql = () => run();\n\n    if (mql && mql.addEventListener) mql.addEventListener(\"change\", onMql);\n    else if (mql && (mql as any).addListener) (mql as any).addListener(onMql);\n\n    return () => {\n      off();\n      if (mql && mql.removeEventListener) mql.removeEventListener(\"change\", onMql);\n      else if (mql && (mql as any).removeListener) (mql as any).removeListener(onMql);\n    };\n  }, []);\n\n  return null;\n}\n"],"names":[],"mappings":"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"}