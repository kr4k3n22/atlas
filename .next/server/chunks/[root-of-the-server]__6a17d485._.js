module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},66680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},27356,e=>{"use strict";let t,r;var a=e.i(66680);function s(e=21){var i;i=e|=0,!t||t.length<i?(t=Buffer.allocUnsafe(128*i),a.webcrypto.getRandomValues(t),r=0):r+i>t.length&&(a.webcrypto.getRandomValues(t),r=0),r+=i;let o="";for(let a=r-e;a<r;a++)o+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&t[a]];return o}e.s(["nanoid",()=>s],27356)},46062,e=>{"use strict";var t=e.i(1950);async function r(){let{data:e,error:r}=await t.supabaseAdmin.from("audit_log").select("*").order("ts",{ascending:!1});if(r)throw Error(r.message);return e??[]}async function a(e){let r={id:e.id,ts:e.ts,actor:e.actor,action:e.action,case_id:e.case_id,detail:e.detail},{data:a,error:s}=await t.supabaseAdmin.from("audit_log").insert(r).select("*").single();if(s)throw Error(s.message);return a}e.s(["appendAuditEvent",()=>a,"listAuditEvents",()=>r])},81267,e=>{"use strict";var t=e.i(1950);async function r(e){let r={ok:!0,executed:!0,message:"executed",tool_name:e.tool_name,tool_args:e.tool_args,executed_at:new Date().toISOString()},{data:a,error:s}=await t.supabaseAdmin.from("action_executions").insert({case_id:e.case_id??null,requested_by:e.requested_by??null,approver:e.approver??null,tool_name:e.tool_name,tool_args:e.tool_args,decision_source:e.decision_source,status:"EXECUTED",response:r}).select("*").single();if(s||!a)throw Error(s?.message??"Failed to log action execution");return a}e.s(["executeAction",()=>r])},11300,e=>{e.v([{id:"CASE-1001",created_at:"2026-01-31T10:15:00Z",status:"PENDING_REVIEW",user_display:"Alex",user_message:"Why is my payment stopped?",tool_name:"Access_Alex_Welfare_Records",tool_args_redacted:{record_id:"***",fields:["payment_status","last_action"]},risk_label:"ESCALATE",risk_score:78,risk_rationale:"Material impact and sensitive records access. Requires human approval.",policy_refs:["NIST-RMF-MEASURE-PII","POLICY-WELFARE-001"],history:[{ts:"2026-01-31T10:15:00Z",actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:"2026-01-31T10:15:02Z",actor:"risk_slm",event:"scored",detail:"ESCALATE (78)."}]},{id:"CASE-1002",created_at:"2026-01-31T09:40:00Z",status:"APPROVED",user_display:"Jordan",user_message:"Can you update my address on file?",tool_name:"Update_Address",tool_args_redacted:{user_id:"***",new_address:"***"},risk_label:"ESCALATE",risk_score:66,risk_rationale:"Identity and record mutation. Human approval required.",policy_refs:["POLICY-IDENTITY-002"],history:[{ts:"2026-01-31T09:40:00Z",actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:"2026-01-31T09:40:02Z",actor:"risk_slm",event:"scored",detail:"ESCALATE (66)."},{ts:"2026-01-31T09:44:10Z",actor:"sarah",event:"decided",detail:"APPROVED. Verified caller via existing KBA."}]},{id:"CASE-1003",created_at:"2026-01-31T08:05:00Z",status:"REJECTED",user_display:"Morgan",user_message:"Cancel my benefits for my spouse immediately.",tool_name:"Terminate_Dependent_Benefits",tool_args_redacted:{dependent_id:"***"},risk_label:"BLOCK",risk_score:92,risk_rationale:"High-impact termination request with insufficient verification. Block by default.",policy_refs:["POLICY-HIGH-IMPACT-003"],history:[{ts:"2026-01-31T08:05:00Z",actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:"2026-01-31T08:05:02Z",actor:"risk_slm",event:"scored",detail:"BLOCK (92)."},{ts:"2026-01-31T08:10:00Z",actor:"sarah",event:"decided",detail:"REJECTED. Require verified identity + signed form."}]}])},49468,e=>{"use strict";var t=e.i(27356),r=e.i(11300),a=e.i(69719);let s=a.z.enum(["PENDING_REVIEW","APPROVED","REJECTED","NEEDS_MORE_INFO","EXPIRED"]),i=a.z.enum(["ROUTINE","ESCALATE","BLOCK"]),o=a.z.object({ts:a.z.string(),actor:a.z.string(),event:a.z.string(),detail:a.z.string()}),n=a.z.object({id:a.z.string(),created_at:a.z.string(),status:s,user_display:a.z.string(),user_message:a.z.string(),tool_name:a.z.string(),tool_args_redacted:a.z.record(a.z.string(),a.z.unknown()),risk_label:i,risk_score:a.z.number().min(0).max(100),risk_rationale:a.z.string(),policy_refs:a.z.array(a.z.string()),history:a.z.array(o)});a.z.object({case_id:a.z.string(),decision:a.z.enum(["APPROVE","REJECT","REQUEST_INFO"]),comment:a.z.string().optional(),constraints:a.z.record(a.z.string(),a.z.unknown()).optional()});var l=e.i(46062),d=e.i(1950),c=e.i(81267);let _=()=>new Date().toISOString();function u(e){let t={...e,policy_refs:Array.isArray(e.policy_refs)?e.policy_refs:[],history:Array.isArray(e.history)?e.history:[]};return n.parse(t)}async function p(){let{data:e,error:t}=await d.supabaseAdmin.from("approval_queue").select("*").order("created_at",{ascending:!1});if(t)throw Error(t.message);return(e?.length?e:r.default).map(u).map(g)}async function m(e){let{data:t,error:r}=await d.supabaseAdmin.from("approval_queue").select("*").eq("id",e).single();return r||!t?null:g(u(t))}async function E(e){let r=`CASE-${(0,t.nanoid)(6).toUpperCase()}`,a=_(),s=n.parse({id:r,created_at:a,status:"PENDING_REVIEW",user_display:e.user_display,user_message:e.user_message,tool_name:e.tool_name,tool_args_redacted:e.tool_args_redacted,risk_label:e.risk_label,risk_score:e.risk_score,risk_rationale:e.risk_rationale,policy_refs:e.policy_refs,history:[{ts:a,actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:a,actor:"risk_engine",event:"scored",detail:`${e.risk_label} (${e.risk_score}).`}]}),{data:i,error:o}=await d.supabaseAdmin.from("approval_queue").insert(s).select("*").single();if(o)throw Error(o.message);return await (0,l.appendAuditEvent)({actor:"proxy",action:"case_created",case_id:r,detail:`Queued ${e.tool_name} for approval.`}),g(u(i))}async function y(e){let{data:t,error:r}=await d.supabaseAdmin.from("approval_queue").select("*").eq("id",e.id).single();if(r||!t)return null;let a=e.decision,s=e.note?.trim()||"",i="APPROVE"===a?"APPROVED":"REJECT"===a?"REJECTED":"REQUEST_INFO"===a?"NEEDS_MORE_INFO":"PENDING_REVIEW",o=Array.isArray(t.history)?t.history:[];o.push({ts:_(),actor:"reviewer",event:"REQUEST_INFO"===a?"request_info":"decided",detail:"REQUEST_INFO"===a?`Requested more information${s?`: ${s}`:""}`:`${a}${s?`: ${s}`:""}`});let{data:n,error:p}=await d.supabaseAdmin.from("approval_queue").update({status:i,history:o}).eq("id",e.id).select("*").single();return p||!n?null:(await (0,l.appendAuditEvent)({actor:"reviewer",action:"REQUEST_INFO"===a?"request_info":`decision_${a.toLowerCase()}`,case_id:n.id,detail:s||void 0}),"APPROVE"===a&&await (0,c.executeAction)({case_id:n.id,requested_by:n.user_display??null,approver:"reviewer",tool_name:n.tool_name,tool_args:n.tool_args_redacted??{},decision_source:"APPROVED"}),g(u(n)))}function g(e){let t={...e};return t.user_name=e.user_display,t.audit_trail=(e.history??[]).map(e=>({ts:e.ts,actor:e.actor,action:e.event,detail:e.detail})),t}e.s(["applyDecision",()=>y,"createCase",()=>E,"getAllCases",()=>p,"getCaseById",()=>m],49468)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6a17d485._.js.map