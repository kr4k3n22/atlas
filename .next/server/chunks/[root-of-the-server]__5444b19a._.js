module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},66680,(e,t,r)=>{t.exports=e.x("node:crypto",()=>require("node:crypto"))},27356,e=>{"use strict";let t,r;var a=e.i(66680);function s(e=21){var i;i=e|=0,!t||t.length<i?(t=Buffer.allocUnsafe(128*i),a.webcrypto.getRandomValues(t),r=0):r+i>t.length&&(a.webcrypto.getRandomValues(t),r=0),r+=i;let n="";for(let a=r-e;a<r;a++)n+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&t[a]];return n}e.s(["nanoid",()=>s],27356)},46062,e=>{"use strict";var t=e.i(1950);async function r(){let{data:e,error:r}=await t.supabaseAdmin.from("audit_log").select("*").order("ts",{ascending:!1});if(r)throw Error(r.message);return e??[]}async function a(e){let r={id:e.id,ts:e.ts,actor:e.actor,action:e.action,case_id:e.case_id,detail:e.detail},{data:a,error:s}=await t.supabaseAdmin.from("audit_log").insert(r).select("*").single();if(s)throw Error(s.message);return a}e.s(["appendAuditEvent",()=>a,"listAuditEvents",()=>r])},81267,e=>{"use strict";var t=e.i(1950);async function r(e){let r={ok:!0,executed:!0,message:"executed",tool_name:e.tool_name,tool_args:e.tool_args,executed_at:new Date().toISOString()},{data:a,error:s}=await t.supabaseAdmin.from("action_executions").insert({case_id:e.case_id??null,requested_by:e.requested_by??null,approver:e.approver??null,tool_name:e.tool_name,tool_args:e.tool_args,decision_source:e.decision_source,status:"EXECUTED",response:r}).select("*").single();if(s||!a)throw Error(s?.message??"Failed to log action execution");return a}e.s(["executeAction",()=>r])},11300,e=>{e.v([{id:"CASE-1001",created_at:"2026-01-31T10:15:00Z",status:"PENDING_REVIEW",user_display:"Alex",user_message:"Why is my payment stopped?",tool_name:"Access_Alex_Welfare_Records",tool_args_redacted:{record_id:"***",fields:["payment_status","last_action"]},risk_label:"ESCALATE",risk_score:78,risk_rationale:"Material impact and sensitive records access. Requires human approval.",policy_refs:["NIST-RMF-MEASURE-PII","POLICY-WELFARE-001"],history:[{ts:"2026-01-31T10:15:00Z",actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:"2026-01-31T10:15:02Z",actor:"risk_slm",event:"scored",detail:"ESCALATE (78)."}]},{id:"CASE-1002",created_at:"2026-01-31T09:40:00Z",status:"APPROVED",user_display:"Jordan",user_message:"Can you update my address on file?",tool_name:"Update_Address",tool_args_redacted:{user_id:"***",new_address:"***"},risk_label:"ESCALATE",risk_score:66,risk_rationale:"Identity and record mutation. Human approval required.",policy_refs:["POLICY-IDENTITY-002"],history:[{ts:"2026-01-31T09:40:00Z",actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:"2026-01-31T09:40:02Z",actor:"risk_slm",event:"scored",detail:"ESCALATE (66)."},{ts:"2026-01-31T09:44:10Z",actor:"sarah",event:"decided",detail:"APPROVED. Verified caller via existing KBA."}]},{id:"CASE-1003",created_at:"2026-01-31T08:05:00Z",status:"REJECTED",user_display:"Morgan",user_message:"Cancel my benefits for my spouse immediately.",tool_name:"Terminate_Dependent_Benefits",tool_args_redacted:{dependent_id:"***"},risk_label:"BLOCK",risk_score:92,risk_rationale:"High-impact termination request with insufficient verification. Block by default.",policy_refs:["POLICY-HIGH-IMPACT-003"],history:[{ts:"2026-01-31T08:05:00Z",actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:"2026-01-31T08:05:02Z",actor:"risk_slm",event:"scored",detail:"BLOCK (92)."},{ts:"2026-01-31T08:10:00Z",actor:"sarah",event:"decided",detail:"REJECTED. Require verified identity + signed form."}]}])},49468,e=>{"use strict";var t=e.i(27356),r=e.i(11300),a=e.i(69719);let s=a.z.enum(["PENDING_REVIEW","APPROVED","REJECTED","NEEDS_MORE_INFO","EXPIRED"]),i=a.z.enum(["ROUTINE","ESCALATE","BLOCK"]),n=a.z.object({ts:a.z.string(),actor:a.z.string(),event:a.z.string(),detail:a.z.string()}),o=a.z.object({id:a.z.string(),created_at:a.z.string(),status:s,user_display:a.z.string(),user_message:a.z.string(),tool_name:a.z.string(),tool_args_redacted:a.z.record(a.z.string(),a.z.unknown()),risk_label:i,risk_score:a.z.number().min(0).max(100),risk_rationale:a.z.string(),policy_refs:a.z.array(a.z.string()),history:a.z.array(n)});a.z.object({case_id:a.z.string(),decision:a.z.enum(["APPROVE","REJECT","REQUEST_INFO"]),comment:a.z.string().optional(),constraints:a.z.record(a.z.string(),a.z.unknown()).optional()});var l=e.i(46062),d=e.i(1950),c=e.i(81267);let u=()=>new Date().toISOString();function p(e){let t={...e,policy_refs:Array.isArray(e.policy_refs)?e.policy_refs:[],history:Array.isArray(e.history)?e.history:[]};return o.parse(t)}async function _(){let{data:e,error:t}=await d.supabaseAdmin.from("approval_queue").select("*").order("created_at",{ascending:!1});if(t)throw Error(t.message);return(e?.length?e:r.default).map(p).map(y)}async function E(e){let{data:t,error:r}=await d.supabaseAdmin.from("approval_queue").select("*").eq("id",e).single();return r||!t?null:y(p(t))}async function m(e){let r=`CASE-${(0,t.nanoid)(6).toUpperCase()}`,a=u(),s=o.parse({id:r,created_at:a,status:"PENDING_REVIEW",user_display:e.user_display,user_message:e.user_message,tool_name:e.tool_name,tool_args_redacted:e.tool_args_redacted,risk_label:e.risk_label,risk_score:e.risk_score,risk_rationale:e.risk_rationale,policy_refs:e.policy_refs,history:[{ts:a,actor:"proxy",event:"created",detail:"Tool call intercepted."},{ts:a,actor:"risk_engine",event:"scored",detail:`${e.risk_label} (${e.risk_score}).`}]}),{data:i,error:n}=await d.supabaseAdmin.from("approval_queue").insert(s).select("*").single();if(n)throw Error(n.message);return await (0,l.appendAuditEvent)({actor:"proxy",action:"case_created",case_id:r,detail:`Queued ${e.tool_name} for approval.`}),y(p(i))}async function g(e){let{data:t,error:r}=await d.supabaseAdmin.from("approval_queue").select("*").eq("id",e.id).single();if(r||!t)return null;let a=e.decision,s=e.note?.trim()||"",i="APPROVE"===a?"APPROVED":"REJECT"===a?"REJECTED":"REQUEST_INFO"===a?"NEEDS_MORE_INFO":"PENDING_REVIEW",n=Array.isArray(t.history)?t.history:[];n.push({ts:u(),actor:"reviewer",event:"REQUEST_INFO"===a?"request_info":"decided",detail:"REQUEST_INFO"===a?`Requested more information${s?`: ${s}`:""}`:`${a}${s?`: ${s}`:""}`});let{data:o,error:_}=await d.supabaseAdmin.from("approval_queue").update({status:i,history:n}).eq("id",e.id).select("*").single();return _||!o?null:(await (0,l.appendAuditEvent)({actor:"reviewer",action:"REQUEST_INFO"===a?"request_info":`decision_${a.toLowerCase()}`,case_id:o.id,detail:s||void 0}),"APPROVE"===a&&await (0,c.executeAction)({case_id:o.id,requested_by:o.user_display??null,approver:"reviewer",tool_name:o.tool_name,tool_args:o.tool_args_redacted??{},decision_source:"APPROVED"}),y(p(o)))}function y(e){let t={...e};return t.user_name=e.user_display,t.audit_trail=(e.history??[]).map(e=>({ts:e.ts,actor:e.actor,action:e.event,detail:e.detail})),t}e.s(["applyDecision",()=>g,"createCase",()=>m,"getAllCases",()=>_,"getCaseById",()=>E],49468)},51971,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),s=e.i(59756),i=e.i(61916),n=e.i(74677),o=e.i(69741),l=e.i(16795),d=e.i(87718),c=e.i(95169),u=e.i(47587),p=e.i(66012),_=e.i(70101),E=e.i(26937),m=e.i(10372),g=e.i(93695);e.i(52474);var y=e.i(5232),f=e.i(49468);async function v(){let e=await (0,f.getAllCases)();return Response.json(e)}e.s(["GET",()=>v],88237);var R=e.i(88237);let h=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/cases/route",pathname:"/api/cases",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/cases/route.ts",nextConfigOutput:"",userland:R}),{workAsyncStorage:A,workUnitAsyncStorage:x,serverHooks:w}=h;function C(){return(0,a.patchFetch)({workAsyncStorage:A,workUnitAsyncStorage:x})}async function T(e,t,a){h.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let f="/api/cases/route";f=f.replace(/\/index$/,"")||"/";let v=await h.prepare(e,t,{srcPage:f,multiZoneDraftMode:!1});if(!v)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:R,params:A,nextConfig:x,parsedUrl:w,isDraftMode:C,prerenderManifest:T,routerServerContext:b,isOnDemandRevalidate:P,revalidateOnlyGenerated:k,resolvedPathname:O,clientReferenceManifest:I,serverActionsManifest:N}=v,S=(0,o.normalizeAppPath)(f),q=!!(T.dynamicRoutes[S]||T.routes[O]),D=async()=>((null==b?void 0:b.render404)?await b.render404(e,t,w,!1):t.end("This page could not be found"),null);if(q&&!C){let e=!!T.routes[O],t=T.dynamicRoutes[S];if(t&&!1===t.fallback&&!e){if(x.experimental.adapterPath)return await D();throw new g.NoFallbackError}}let z=null;!q||h.isDev||C||(z="/index"===(z=O)?"/":z);let U=!0===h.isDev||!q,H=q&&!U;N&&I&&(0,n.setManifestsSingleton)({page:f,clientReferenceManifest:I,serverActionsManifest:N});let j=e.method||"GET",M=(0,i.getTracer)(),F=M.getActiveScopeSpan(),L={params:A,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!x.experimental.authInterrupts},cacheComponents:!!x.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:x.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,s)=>h.onRequestError(e,t,a,s,b)},sharedContext:{buildId:R}},V=new l.NodeNextRequest(e),$=new l.NodeNextResponse(t),B=d.NextRequestAdapter.fromNodeNextRequest(V,(0,d.signalFromNodeResponse)(t));try{let n=async e=>h.handle(B,L).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=M.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${j} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${j} ${f}`)}),o=!!(0,s.getRequestMeta)(e,"minimalMode"),l=async s=>{var i,l;let d=async({previousCacheEntry:r})=>{try{if(!o&&P&&k&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await n(s);e.fetchMetrics=L.renderOpts.fetchMetrics;let l=L.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let d=L.renderOpts.collectedTags;if(!q)return await (0,p.sendResponse)(V,$,i,L.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,_.toNodeOutgoingHttpHeaders)(i.headers);d&&(t[m.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,a=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:y.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await h.onRequestError(e,t,{routerKind:"App Router",routePath:f,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:P})},!1,b),t}},c=await h.handleResponse({req:e,nextConfig:x,cacheKey:z,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:k,responseGenerator:d,waitUntil:a.waitUntil,isMinimalMode:o});if(!q)return null;if((null==c||null==(i=c.value)?void 0:i.kind)!==y.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",P?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),C&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let g=(0,_.fromNodeOutgoingHttpHeaders)(c.value.headers);return o&&q||g.delete(m.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||g.get("Cache-Control")||g.set("Cache-Control",(0,E.getCacheControlHeader)(c.cacheControl)),await (0,p.sendResponse)(V,$,new Response(c.value.body,{headers:g,status:c.value.status||200})),null};F?await l(F):await M.withPropagatedContext(e.headers,()=>M.trace(c.BaseServerSpan.handleRequest,{spanName:`${j} ${f}`,kind:i.SpanKind.SERVER,attributes:{"http.method":j,"http.target":e.url}},l))}catch(t){if(t instanceof g.NoFallbackError||await h.onRequestError(e,t,{routerKind:"App Router",routePath:S,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:H,isOnDemandRevalidate:P})},!1,b),q)throw t;return await (0,p.sendResponse)(V,$,new Response(null,{status:500})),null}}e.s(["handler",()=>T,"patchFetch",()=>C,"routeModule",()=>h,"serverHooks",()=>w,"workAsyncStorage",()=>A,"workUnitAsyncStorage",()=>x],51971)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5444b19a._.js.map